name: npm install
description: npm install
inputs:
  ls_options:
    description: ls options
    required: false
    # in windows, la does NOT work
    default: "-la"

  working-directory:
    description: working-directory
    required: false
    default: "."

runs:
  using: composite
  steps:
    - name: ls
      shell: bash
      working-directory: ${{ inputs.working-directory }}
      run: ls ${{ inputs.ls_options }} .

    - name: npm run setup:ci
      shell: bash
      working-directory: ${{ inputs.working-directory }}
      run: npm run setup:ci  --if-present

    - name: npm install
      shell: bash
      working-directory: ${{ inputs.working-directory }}
      run: npm clean-install .

    - name: ls ./node_modules
      shell: bash
      working-directory: ${{ inputs.working-directory }}
      run: ls ${{ inputs.ls_options }} ./node_modules
